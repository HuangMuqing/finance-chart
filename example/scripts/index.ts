import './index.scss'
import { TimeShareDrawer } from '../../src/chart/time-share-drawer'
import { CandleStickDrawer } from '../../src/chart/candle-stick-drawer';
import { Chart } from '../../src/chart/chart'
import { VolumeDrawer, VolumeData } from '../../src/chart/volume-drawer'

function createTimeShare() {
  const MOCK_TIME_SHARE = [
    {
      "time": 90,
      "price": 4.599999904632568,
      "avg": 4.6051177978515625,
      "volume": 2183600,
      "holdAmount": 10067614
    },
    {
      "time": 91,
      "price": 4.610001087188721,
      "avg": 4.5824809074401855,
      "volume": 4153180,
      "holdAmount": 18965390
    },
    {
      "time": 92,
      "price": 4.670000076293945,
      "avg": 4.60253381729126,
      "volume": 2049400,
      "holdAmount": 9498640
    },
    {
      "time": 93,
      "price": 4.610001087188721,
      "avg": 4.608004093170166,
      "volume": 1572700,
      "holdAmount": 7290824
    },
    {
      "time": 94,
      "price": 4.639999866485596,
      "avg": 4.610294818878174,
      "volume": 1762700,
      "holdAmount": 8143788
    },
    {
      "time": 95,
      "price": 4.630001068115234,
      "avg": 4.613296031951904,
      "volume": 1531500,
      "holdAmount": 7104908
    },
    {
      "time": 96,
      "price": 4.619999885559082,
      "avg": 4.613879203796387,
      "volume": 904500,
      "holdAmount": 4180980
    },
    {
      "time": 97,
      "price": 4.639999866485596,
      "avg": 4.614800930023193,
      "volume": 1240200,
      "holdAmount": 5733360
    },
    {
      "time": 98,
      "price": 4.619999885559082,
      "avg": 4.615808010101318,
      "volume": 1047700,
      "holdAmount": 4849056
    },
    {
      "time": 99,
      "price": 4.579999923706055,
      "avg": 4.61432409286499,
      "volume": 1561700,
      "holdAmount": 7178136
    },
    {
      "time": 100,
      "price": 4.590000152587891,
      "avg": 4.612071990966797,
      "volume": 1253700,
      "holdAmount": 5739248
    },
    {
      "time": 101,
      "price": 4.610001087188721,
      "avg": 4.611946105957031,
      "volume": 969200,
      "holdAmount": 4460264
    },
    {
      "time": 102,
      "price": 4.599999904632568,
      "avg": 4.611466884613037,
      "volume": 1031400,
      "holdAmount": 4748624
    },
    {
      "time": 103,
      "price": 4.590000152587891,
      "avg": 4.610695838928223,
      "volume": 795200,
      "holdAmount": 3650592
    },
    {
      "time": 104,
      "price": 4.610001087188721,
      "avg": 4.610440254211426,
      "volume": 683000,
      "holdAmount": 3140872
    },
    {
      "time": 105,
      "price": 4.610001087188721,
      "avg": 4.610584259033203,
      "volume": 582400,
      "holdAmount": 2689024
    },
    {
      "time": 106,
      "price": 4.630001068115234,
      "avg": 4.610931873321533,
      "volume": 831100,
      "holdAmount": 3838696
    },
    {
      "time": 107,
      "price": 4.619999885559082,
      "avg": 4.611230850219727,
      "volume": 658800,
      "holdAmount": 3045296
    },
    {
      "time": 108,
      "price": 4.630001068115234,
      "avg": 4.611581802368164,
      "volume": 623000,
      "holdAmount": 2880400
    },
    {
      "time": 109,
      "price": 4.650000095367432,
      "avg": 4.612401008605957,
      "volume": 804600,
      "holdAmount": 3730960
    },
    {
      "time": 110,
      "price": 4.679999828338623,
      "avg": 4.615134239196777,
      "volume": 1356746,
      "holdAmount": 6334232
    },
    {
      "time": 111,
      "price": 4.670000076293945,
      "avg": 4.619053840637207,
      "volume": 1969900,
      "holdAmount": 9213032
    },
    {
      "time": 112,
      "price": 4.639999866485596,
      "avg": 4.62034797668457,
      "volume": 1221800,
      "holdAmount": 5686544
    },
    {
      "time": 113,
      "price": 4.670000076293945,
      "avg": 4.621469020843506,
      "volume": 899300,
      "holdAmount": 4190016
    },
    {
      "time": 114,
      "price": 4.720000267028809,
      "avg": 4.624312877655029,
      "volume": 1271300,
      "holdAmount": 5967056
    },
    {
      "time": 115,
      "price": 4.730000019073486,
      "avg": 4.634852886199951,
      "volume": 3419102,
      "holdAmount": 16200480
    },
    {
      "time": 116,
      "price": 4.710000038146973,
      "avg": 4.638514041900635,
      "volume": 1853000,
      "holdAmount": 8722896
    },
    {
      "time": 117,
      "price": 4.720000267028809,
      "avg": 4.640841007232666,
      "volume": 1170000,
      "holdAmount": 5517360
    },
    {
      "time": 118,
      "price": 4.739999771118164,
      "avg": 4.647663116455078,
      "volume": 2908200,
      "holdAmount": 13778864
    },
    {
      "time": 119,
      "price": 4.710000038146973,
      "avg": 4.651083946228027,
      "volume": 1853200,
      "holdAmount": 8762688
    },
    {
      "time": 120,
      "price": 4.710000038146973,
      "avg": 4.65199089050293,
      "volume": 853320,
      "holdAmount": 4011584
    },
    {
      "time": 121,
      "price": 4.699999809265137,
      "avg": 4.65293025970459,
      "volume": 783800,
      "holdAmount": 3690320
    },
    {
      "time": 122,
      "price": 4.699999809265137,
      "avg": 4.6535868644714355,
      "volume": 567496,
      "holdAmount": 2670832
    },
    {
      "time": 123,
      "price": 4.690000057220459,
      "avg": 4.654483795166016,
      "volume": 1088800,
      "holdAmount": 5109712
    },
    {
      "time": 124,
      "price": 4.679999828338623,
      "avg": 4.6549458503723145,
      "volume": 730000,
      "holdAmount": 3418784
    },
    {
      "time": 125,
      "price": 4.679999828338623,
      "avg": 4.65517520904541,
      "volume": 551200,
      "holdAmount": 2576176
    },
    {
      "time": 126,
      "price": 4.659999847412109,
      "avg": 4.655303955078125,
      "volume": 1089400,
      "holdAmount": 5074240
    },
    {
      "time": 127,
      "price": 4.650000095367432,
      "avg": 4.6552510261535645,
      "volume": 563304,
      "holdAmount": 2620192
    },
    {
      "time": 128,
      "price": 4.679999828338623,
      "avg": 4.6552629470825195,
      "volume": 450600,
      "holdAmount": 2098560
    },
    {
      "time": 129,
      "price": 4.659999847412109,
      "avg": 4.6554059982299805,
      "volume": 452496,
      "holdAmount": 2114192
    },
    {
      "time": 130,
      "price": 4.679999828338623,
      "avg": 4.655525207519531,
      "volume": 299600,
      "holdAmount": 1401248
    },
    {
      "time": 131,
      "price": 4.690000057220459,
      "avg": 4.655882835388184,
      "volume": 576904,
      "holdAmount": 2705136
    },
    {
      "time": 132,
      "price": 4.699999809265137,
      "avg": 4.656394004821777,
      "volume": 687896,
      "holdAmount": 3229216
    },
    {
      "time": 133,
      "price": 4.710000038146973,
      "avg": 4.656979084014893,
      "volume": 661400,
      "holdAmount": 3110864
    },
    {
      "time": 134,
      "price": 4.679999828338623,
      "avg": 4.657803058624268,
      "volume": 984000,
      "holdAmount": 4625728
    },
    {
      "time": 135,
      "price": 4.699999809265137,
      "avg": 4.658013820648193,
      "volume": 438504,
      "holdAmount": 2054592
    },
    {
      "time": 136,
      "price": 4.690000057220459,
      "avg": 4.658225059509277,
      "volume": 362800,
      "holdAmount": 1701520
    },
    {
      "time": 137,
      "price": 4.670000076293945,
      "avg": 4.658507823944092,
      "volume": 764696,
      "holdAmount": 3577104
    },
    {
      "time": 138,
      "price": 4.659999847412109,
      "avg": 4.658519744873047,
      "volume": 414000,
      "holdAmount": 1930160
    },
    {
      "time": 139,
      "price": 4.679999828338623,
      "avg": 4.658555030822754,
      "volume": 252200,
      "holdAmount": 1178160
    },
    {
      "time": 140,
      "price": 4.679999828338623,
      "avg": 4.658720016479492,
      "volume": 346344,
      "holdAmount": 1621280
    },
    {
      "time": 141,
      "price": 4.690000057220459,
      "avg": 4.658944129943848,
      "volume": 493496,
      "holdAmount": 2311984
    },
    {
      "time": 142,
      "price": 4.690000057220459,
      "avg": 4.659022808074951,
      "volume": 160000,
      "holdAmount": 749680
    },
    {
      "time": 143,
      "price": 4.670000076293945,
      "avg": 4.659078121185303,
      "volume": 176904,
      "holdAmount": 827264
    },
    {
      "time": 144,
      "price": 4.679999828338623,
      "avg": 4.659135818481445,
      "volume": 182696,
      "holdAmount": 853728
    },
    {
      "time": 145,
      "price": 4.670000076293945,
      "avg": 4.659213066101074,
      "volume": 257800,
      "holdAmount": 1205504
    },
    {
      "time": 146,
      "price": 4.670000076293945,
      "avg": 4.659275054931641,
      "volume": 262104,
      "holdAmount": 1224224
    },
    {
      "time": 147,
      "price": 4.659999847412109,
      "avg": 4.659299850463867,
      "volume": 389200,
      "holdAmount": 1814368
    },
    {
      "time": 148,
      "price": 4.650000095367432,
      "avg": 4.659286975860596,
      "volume": 547600,
      "holdAmount": 2549312
    },
    {
      "time": 149,
      "price": 4.650000095367432,
      "avg": 4.659225940704346,
      "volume": 462896,
      "holdAmount": 2153568
    },
    {
      "time": 150,
      "price": 4.659999847412109,
      "avg": 4.6592302322387695,
      "volume": 403600,
      "holdAmount": 1880000
    },
    {
      "time": 151,
      "price": 4.659999847412109,
      "avg": 4.659244060516357,
      "volume": 297304,
      "holdAmount": 1385952
    },
    {
      "time": 152,
      "price": 4.670000076293945,
      "avg": 4.659273147583008,
      "volume": 263096,
      "holdAmount": 1228000
    },
    {
      "time": 153,
      "price": 4.670000076293945,
      "avg": 4.65933084487915,
      "volume": 215304,
      "holdAmount": 1006112
    },
    {
      "time": 154,
      "price": 4.679999828338623,
      "avg": 4.6594061851501465,
      "volume": 307200,
      "holdAmount": 1435264
    },
    {
      "time": 155,
      "price": 4.659999847412109,
      "avg": 4.659453868865967,
      "volume": 447800,
      "holdAmount": 2088928
    },
    {
      "time": 156,
      "price": 4.650000095367432,
      "avg": 4.659420967102051,
      "volume": 459096,
      "holdAmount": 2136128
    },
    {
      "time": 157,
      "price": 4.639999866485596,
      "avg": 4.659273147583008,
      "volume": 508504,
      "holdAmount": 2360448
    },
    {
      "time": 158,
      "price": 4.619999885559082,
      "avg": 4.658662796020508,
      "volume": 1360200,
      "holdAmount": 6298112
    },
    {
      "time": 159,
      "price": 4.630001068115234,
      "avg": 4.658181190490723,
      "volume": 881000,
      "holdAmount": 4069632
    },
    {
      "time": 160,
      "price": 4.639999866485596,
      "avg": 4.6581130027771,
      "volume": 284400,
      "holdAmount": 1319776
    },
    {
      "time": 161,
      "price": 4.650000095367432,
      "avg": 4.658053874969482,
      "volume": 367800,
      "holdAmount": 1708960
    },
    {
      "time": 162,
      "price": 4.630001068115234,
      "avg": 4.6579461097717285,
      "volume": 398296,
      "holdAmount": 1848640
    },
    {
      "time": 163,
      "price": 4.639999866485596,
      "avg": 4.657833099365234,
      "volume": 369704,
      "holdAmount": 1713280
    },
    {
      "time": 164,
      "price": 4.639999866485596,
      "avg": 4.657773971557617,
      "volume": 239000,
      "holdAmount": 1109056
    },
    {
      "time": 165,
      "price": 4.650000095367432,
      "avg": 4.657737731933594,
      "volume": 151296,
      "holdAmount": 702208
    },
    {
      "time": 166,
      "price": 4.650000095367432,
      "avg": 4.657699108123779,
      "volume": 252504,
      "holdAmount": 1173600
    },
    {
      "time": 167,
      "price": 4.659999847412109,
      "avg": 4.657695770263672,
      "volume": 193896,
      "holdAmount": 902656
    },
    {
      "time": 168,
      "price": 4.639999866485596,
      "avg": 4.6576361656188965,
      "volume": 409304,
      "holdAmount": 1901632
    },
    {
      "time": 169,
      "price": 4.639999866485596,
      "avg": 4.657587051391602,
      "volume": 245400,
      "holdAmount": 1139168
    },
    {
      "time": 170,
      "price": 4.630001068115234,
      "avg": 4.657529830932617,
      "volume": 178296,
      "holdAmount": 826592
    },
    {
      "time": 171,
      "price": 4.639999866485596,
      "avg": 4.657463073730469,
      "volume": 227400,
      "holdAmount": 1053728
    },
    {
      "time": 172,
      "price": 4.650000095367432,
      "avg": 4.657437801361084,
      "volume": 124200,
      "holdAmount": 576896
    },
    {
      "time": 173,
      "price": 4.650000095367432,
      "avg": 4.657413005828857,
      "volume": 268104,
      "holdAmount": 1246048
    },
    {
      "time": 174,
      "price": 4.670000076293945,
      "avg": 4.657427787780762,
      "volume": 245696,
      "holdAmount": 1144960
    },
    {
      "time": 175,
      "price": 4.670000076293945,
      "avg": 4.657527923583984,
      "volume": 439104,
      "holdAmount": 2051968
    },
    {
      "time": 176,
      "price": 4.690000057220459,
      "avg": 4.657651901245117,
      "volume": 310296,
      "holdAmount": 1454304
    },
    {
      "time": 177,
      "price": 4.690000057220459,
      "avg": 4.657798767089844,
      "volume": 325200,
      "holdAmount": 1524960
    },
    {
      "time": 178,
      "price": 4.679999828338623,
      "avg": 4.657916069030762,
      "volume": 391200,
      "holdAmount": 1830208
    },
    {
      "time": 179,
      "price": 4.670000076293945,
      "avg": 4.657958984375,
      "volume": 180104,
      "holdAmount": 841344
    },
    {
      "time": 180,
      "price": 4.670000076293945,
      "avg": 4.657984733581543,
      "volume": 143200,
      "holdAmount": 669056
    },
    {
      "time": 181,
      "price": 4.670000076293945,
      "avg": 4.658003807067871,
      "volume": 131296,
      "holdAmount": 612768
    },
    {
      "time": 182,
      "price": 4.659999847412109,
      "avg": 4.6580119132995605,
      "volume": 84600,
      "holdAmount": 394592
    },
    {
      "time": 183,
      "price": 4.670000076293945,
      "avg": 4.65802001953125,
      "volume": 84800,
      "holdAmount": 395552
    },
    {
      "time": 184,
      "price": 4.650000095367432,
      "avg": 4.658030033111572,
      "volume": 245704,
      "holdAmount": 1145088
    },
    {
      "time": 185,
      "price": 4.650000095367432,
      "avg": 4.658017158508301,
      "volume": 130096,
      "holdAmount": 605376
    },
    {
      "time": 186,
      "price": 4.659999847412109,
      "avg": 4.6580071449279785,
      "volume": 219704,
      "holdAmount": 1022016
    },
    {
      "time": 187,
      "price": 4.650000095367432,
      "avg": 4.658001899719238,
      "volume": 79600,
      "holdAmount": 370112
    },
    {
      "time": 188,
      "price": 4.650000095367432,
      "avg": 4.6579790115356445,
      "volume": 126800,
      "holdAmount": 589120
    },
    {
      "time": 189,
      "price": 4.650000095367432,
      "avg": 4.657962799072266,
      "volume": 116400,
      "holdAmount": 541088
    },
    {
      "time": 190,
      "price": 4.650000095367432,
      "avg": 4.657961845397949,
      "volume": 47696,
      "holdAmount": 221984
    },
    {
      "time": 191,
      "price": 4.670000076293945,
      "avg": 4.657969951629639,
      "volume": 204000,
      "holdAmount": 950720
    },
    {
      "time": 192,
      "price": 4.659999847412109,
      "avg": 4.657978057861328,
      "volume": 127304,
      "holdAmount": 593280
    },
    {
      "time": 193,
      "price": 4.670000076293945,
      "avg": 4.657981872558594,
      "volume": 125096,
      "holdAmount": 582848
    },
    {
      "time": 194,
      "price": 4.650000095367432,
      "avg": 4.657980918884277,
      "volume": 151704,
      "holdAmount": 706720
    },
    {
      "time": 195,
      "price": 4.659999847412109,
      "avg": 4.657968997955322,
      "volume": 152600,
      "holdAmount": 709824
    },
    {
      "time": 196,
      "price": 4.650000095367432,
      "avg": 4.657961845397949,
      "volume": 103696,
      "holdAmount": 482400
    },
    {
      "time": 197,
      "price": 4.659999847412109,
      "avg": 4.657962799072266,
      "volume": 330504,
      "holdAmount": 1539808
    },
    {
      "time": 198,
      "price": 4.659999847412109,
      "avg": 4.657958984375,
      "volume": 100200,
      "holdAmount": 466272
    },
    {
      "time": 199,
      "price": 4.659999847412109,
      "avg": 4.657961845397949,
      "volume": 108712,
      "holdAmount": 506720
    },
    {
      "time": 200,
      "price": 4.670000076293945,
      "avg": 4.6579790115356445,
      "volume": 230888,
      "holdAmount": 1076768
    },
    {
      "time": 201,
      "price": 4.670000076293945,
      "avg": 4.6579909324646,
      "volume": 124096,
      "holdAmount": 578880
    },
    {
      "time": 202,
      "price": 4.679999828338623,
      "avg": 4.658010959625244,
      "volume": 165416,
      "holdAmount": 772224
    },
    {
      "time": 203,
      "price": 4.670000076293945,
      "avg": 4.658020973205566,
      "volume": 42000,
      "holdAmount": 196416
    },
    {
      "time": 204,
      "price": 4.679999828338623,
      "avg": 4.658041000366211,
      "volume": 96400,
      "holdAmount": 450624
    },
    {
      "time": 205,
      "price": 4.670000076293945,
      "avg": 4.6580891609191895,
      "volume": 180800,
      "holdAmount": 845248
    },
    {
      "time": 206,
      "price": 4.670000076293945,
      "avg": 4.6581220626831055,
      "volume": 245096,
      "holdAmount": 1144288
    },
    {
      "time": 207,
      "price": 4.670000076293945,
      "avg": 4.658141136169434,
      "volume": 97800,
      "holdAmount": 457152
    },
    {
      "time": 208,
      "price": 4.679999828338623,
      "avg": 4.6581711769104,
      "volume": 123200,
      "holdAmount": 575968
    },
    {
      "time": 209,
      "price": 4.679999828338623,
      "avg": 4.658236980438232,
      "volume": 269504,
      "holdAmount": 1260768
    }
  ]

  const timeShareChart = new Chart({
    selector: '#time-share',
    resolution: devicePixelRatio >= 2 ? 2 : 1,
    count: 240,
    data: MOCK_TIME_SHARE,
    mainDrawer: TimeShareDrawer,
    auxiliaryDrawers: [
      class CustomVolumeDrawer extends VolumeDrawer {
        calcDeltaPrice(currentValue: VolumeData, currentIndex: number, data: VolumeData[]): number {
          if (currentIndex === 0) return 0;
          return super.calcDeltaPrice(currentValue, currentIndex, data);
        }
      }
    ]
  })
  function autoUpdateTimeShare() {
    if (MOCK_TIME_SHARE.length < 240) {
      setTimeout(autoUpdateTimeShare, 500)
    }
    const last = MOCK_TIME_SHARE[MOCK_TIME_SHARE.length - 1]
    const next = {
      time: last.time + 1,
      price: last.price * (Math.random() * 0.02 - 0.01 + 1),
      avg: last.avg * (Math.random() * 0.02 - 0.01 + 1),
      volume: Math.round(last.volume * (Math.random() * 0.6 - 0.3 + 1)),
      holdAmount: Math.round(last.holdAmount * (Math.random() * 0.6 - 0.3 + 1)),
    }
    MOCK_TIME_SHARE.push(next)
    timeShareChart.setData(MOCK_TIME_SHARE)
  }
  autoUpdateTimeShare()
}

function createKLine() {
  const MOCK_KLINE = [
    {
      "time": "2018-2-5 0:0:0",
      "open": 5.949999809265137,
      "high": 5.949999809265137,
      "low": 5.949999809265137,
      "close": 5.949999809265137,
      "volume": 1732400,
      "amount": 10307780,
      "ma5": null,
      "ma10": null,
      "ma20": null
    },
    {
      "time": "2018-2-6 0:0:0",
      "open": 5.360000133514404,
      "high": 5.360000133514404,
      "low": 5.360000133514404,
      "close": 5.360000133514404,
      "volume": 1960400,
      "amount": 10507744,
      "ma5": null,
      "ma10": null,
      "ma20": null
    },
    {
      "time": "2018-2-7 0:0:0",
      "open": 4.820000171661377,
      "high": 4.820000171661377,
      "low": 4.820000171661377,
      "close": 4.820000171661377,
      "volume": 82243696,
      "amount": 396414656,
      "ma5": null,
      "ma10": null,
      "ma20": null
    },
    {
      "time": "2018-2-8 0:0:0",
      "open": 4.340000152587891,
      "high": 5.28000020980835,
      "low": 4.340000152587891,
      "close": 5.079999923706055,
      "volume": 878369280,
      "amount": 4109866752,
      "ma5": null,
      "ma10": null,
      "ma20": null
    },
    {
      "time": "2018-2-9 0:0:0",
      "open": 4.570000171661377,
      "high": 4.920000076293945,
      "low": 4.570000171661377,
      "close": 4.570000171661377,
      "volume": 532439104,
      "amount": 2475222016,
      "ma5": 5.15600004196167,
      "ma10": null,
      "ma20": null
    },
    {
      "time": "2018-2-12 0:0:0",
      "open": 4.559999942779541,
      "high": 4.690000057220459,
      "low": 4.340000152587891,
      "close": 4.460000038146973,
      "volume": 311680832,
      "amount": 1403621120,
      "ma5": 4.858000087738037,
      "ma10": null,
      "ma20": null
    },
    {
      "time": "2018-2-13 0:0:0",
      "open": 4.46999979019165,
      "high": 4.510001182556152,
      "low": 4.119999885559082,
      "close": 4.159999847412109,
      "volume": 282127968,
      "amount": 1216240512,
      "ma5": 4.618000030517578,
      "ma10": null,
      "ma20": null
    },
    {
      "time": "2018-2-14 0:0:0",
      "open": 4.110000133514404,
      "high": 4.570000171661377,
      "low": 4.010000228881836,
      "close": 4.420000076293945,
      "volume": 275432448,
      "amount": 1194776064,
      "ma5": 4.538000011444092,
      "ma10": null,
      "ma20": null
    },
    {
      "time": "2018-2-22 0:0:0",
      "open": 4.46999979019165,
      "high": 4.860001087188721,
      "low": 4.349999904632568,
      "close": 4.860001087188721,
      "volume": 282408032,
      "amount": 1291856768,
      "ma5": 4.494000244140625,
      "ma10": null,
      "ma20": null
    },
    {
      "time": "2018-2-23 0:0:0",
      "open": 4.980000019073486,
      "high": 5.349999904632568,
      "low": 4.920000076293945,
      "close": 5.289999961853027,
      "volume": 579148544,
      "amount": 3031056384,
      "ma5": 4.638000202178955,
      "ma10": 4.897000122070312,
      "ma20": null
    },
    {
      "time": "2018-2-26 0:0:0",
      "open": 5.090000152587891,
      "high": 5.369999885559082,
      "low": 5.019999980926514,
      "close": 5.28000020980835,
      "volume": 395589376,
      "amount": 2054845824,
      "ma5": 4.802000236511231,
      "ma10": 4.830000162124634,
      "ma20": null
    },
    {
      "time": "2018-2-27 0:0:0",
      "open": 5.210000038146973,
      "high": 5.489999771118164,
      "low": 5.119999885559082,
      "close": 5.440000057220459,
      "volume": 356252192,
      "amount": 1907704064,
      "ma5": 5.058000278472901,
      "ma10": 4.838000154495239,
      "ma20": null
    },
    {
      "time": "2018-2-28 0:0:0",
      "open": 5.269999980926514,
      "high": 5.539999961853027,
      "low": 5.110001087188721,
      "close": 5.21999979019165,
      "volume": 358397184,
      "amount": 1899974144,
      "ma5": 5.218000221252441,
      "ma10": 4.878000116348266,
      "ma20": null
    },
    {
      "time": "2018-3-1 0:0:0",
      "open": 5.099999904632568,
      "high": 5.25,
      "low": 5.059999942779541,
      "close": 5.199999809265137,
      "volume": 210757456,
      "amount": 1087627392,
      "ma5": 5.285999965667725,
      "ma10": 4.890000104904175,
      "ma20": null
    },
    {
      "time": "2018-3-2 0:0:0",
      "open": 5.150000095367432,
      "high": 5.699999809265137,
      "low": 5.090000152587891,
      "close": 5.5,
      "volume": 439514560,
      "amount": 2388211200,
      "ma5": 5.3279999732971195,
      "ma10": 4.983000087738037,
      "ma20": null
    },
    {
      "time": "2018-3-5 0:0:0",
      "open": 5.28000020980835,
      "high": 5.420000076293945,
      "low": 5.260000228881836,
      "close": 5.329999923706055,
      "volume": 252676256,
      "amount": 1346811648,
      "ma5": 5.33799991607666,
      "ma10": 5.070000076293946,
      "ma20": null
    },
    {
      "time": "2018-3-6 0:0:0",
      "open": 5.329999923706055,
      "high": 5.480000019073486,
      "low": 5.320000171661377,
      "close": 5.380000114440918,
      "volume": 188610784,
      "amount": 1016052864,
      "ma5": 5.325999927520752,
      "ma10": 5.192000102996826,
      "ma20": null
    },
    {
      "time": "2018-3-7 0:0:0",
      "open": 5.329999923706055,
      "high": 5.400000095367432,
      "low": 5.199999809265137,
      "close": 5.340000152587891,
      "volume": 188258912,
      "amount": 997101312,
      "ma5": 5.35,
      "ma10": 5.284000110626221,
      "ma20": null
    },
    {
      "time": "2018-3-8 0:0:0",
      "open": 5.320000171661377,
      "high": 5.449999809265137,
      "low": 5.269999980926514,
      "close": 5.349999904632568,
      "volume": 156897984,
      "amount": 839283776,
      "ma5": 5.380000019073487,
      "ma10": 5.332999992370605,
      "ma20": null
    },
    {
      "time": "2018-3-9 0:0:0",
      "open": 5.300000190734863,
      "high": 5.599999904632568,
      "low": 5.300000190734863,
      "close": 5.460000038146973,
      "volume": 284037120,
      "amount": 1555125376,
      "ma5": 5.372000026702881,
      "ma10": 5.35,
      "ma20": 5.123500061035156
    },
    {
      "time": "2018-3-12 0:0:0",
      "open": 5.409999847412109,
      "high": 5.650000095367432,
      "low": 5.380000114440918,
      "close": 5.599999904632568,
      "volume": 269585024,
      "amount": 1484979456,
      "ma5": 5.426000022888184,
      "ma10": 5.381999969482422,
      "ma20": 5.106000065803528
    },
    {
      "time": "2018-3-13 0:0:0",
      "open": 5.75,
      "high": 6.159999847412109,
      "low": 5.75,
      "close": 6.159999847412109,
      "volume": 163745888,
      "amount": 978012928,
      "ma5": 5.581999969482422,
      "ma10": 5.453999948501587,
      "ma20": 5.146000051498413
    },
    {
      "time": "2018-3-14 0:0:0",
      "open": 6.489999771118164,
      "high": 6.769999980926514,
      "low": 6.360000133514404,
      "close": 6.590000152587891,
      "volume": 378259776,
      "amount": 2487154688,
      "ma5": 5.831999969482422,
      "ma10": 5.590999984741211,
      "ma20": 5.234500050544739
    },
    {
      "time": "2018-3-16 0:0:0",
      "open": 5.929999828338623,
      "high": 5.929999828338623,
      "low": 5.929999828338623,
      "close": 5.929999828338623,
      "volume": 23685700,
      "amount": 140456208,
      "ma5": 5.947999954223633,
      "ma10": 5.66399998664856,
      "ma20": 5.277000045776367
    },
    {
      "time": "2018-3-19 0:0:0",
      "open": 5.340000152587891,
      "high": 5.340000152587891,
      "low": 5.340000152587891,
      "close": 5.340000152587891,
      "volume": 45488900,
      "amount": 242910720,
      "ma5": 5.923999977111817,
      "ma10": 5.648000001907349,
      "ma20": 5.315500044822693
    },
    {
      "time": "2018-3-20 0:0:0",
      "open": 5.210000038146973,
      "high": 5.869999885559082,
      "low": 5.210000038146973,
      "close": 5.869999885559082,
      "volume": 491689984,
      "amount": 2721382912,
      "ma5": 5.977999973297119,
      "ma10": 5.701999998092651,
      "ma20": 5.386000037193298
    },
    {
      "time": "2018-3-21 0:0:0",
      "open": 5.699999809265137,
      "high": 5.880000114440918,
      "low": 5.300000190734863,
      "close": 5.529999732971191,
      "volume": 390751296,
      "amount": 2210697984,
      "ma5": 5.851999950408936,
      "ma10": 5.716999959945679,
      "ma20": 5.454500031471253
    },
    {
      "time": "2018-3-22 0:0:0",
      "open": 5.570000171661377,
      "high": 5.730000019073486,
      "low": 5.360000133514404,
      "close": 5.539999961853027,
      "volume": 218535328,
      "amount": 1215137408,
      "ma5": 5.641999912261963,
      "ma10": 5.736999940872193,
      "ma20": 5.510500025749207
    },
    {
      "time": "2018-3-23 0:0:0",
      "open": 5.400000095367432,
      "high": 5.480000019073486,
      "low": 4.989999771118164,
      "close": 5.079999923706055,
      "volume": 266366960,
      "amount": 1385344256,
      "ma5": 5.471999931335449,
      "ma10": 5.709999942779541,
      "ma20": 5.521499967575073
    },
    {
      "time": "2018-3-28 0:0:0",
      "open": 5.099999904632568,
      "high": 5.340000152587891,
      "low": 5.010001182556152,
      "close": 5.119999885559082,
      "volume": 292908832,
      "amount": 1511612160,
      "ma5": 5.427999877929688,
      "ma10": 5.675999927520752,
      "ma20": 5.512999963760376
    },
    {
      "time": "2018-3-29 0:0:0",
      "open": 5.110001087188721,
      "high": 5.110001087188721,
      "low": 4.699999809265137,
      "close": 4.780001163482666,
      "volume": 288949632,
      "amount": 1390914944,
      "ma5": 5.210000133514404,
      "ma10": 5.594000053405762,
      "ma20": 5.488000011444091
    },
    {
      "time": "2018-3-30 0:0:0",
      "open": 4.789999961853027,
      "high": 4.869999885559082,
      "low": 4.720000267028809,
      "close": 4.760001182556152,
      "volume": 158527232,
      "amount": 758120000,
      "ma5": 5.056000423431397,
      "ma10": 5.454000186920166,
      "ma20": 5.454000067710877
    },
    {
      "time": "2018-4-2 0:0:0",
      "open": 4.970000267028809,
      "high": 5.150000095367432,
      "low": 4.849999904632568,
      "close": 4.949999809265137,
      "volume": 297846944,
      "amount": 1484800512,
      "ma5": 4.9380003929138185,
      "ma10": 5.290000152587891,
      "ma20": 5.440500068664551
    },
    {
      "time": "2018-4-3 0:0:0",
      "open": 4.760001182556152,
      "high": 4.829999923706055,
      "low": 4.559999942779541,
      "close": 4.720000267028809,
      "volume": 202600416,
      "amount": 955253824,
      "ma5": 4.866000461578369,
      "ma10": 5.169000196456909,
      "ma20": 5.416500091552734
    },
    {
      "time": "2018-4-4 0:0:0",
      "open": 4.780001163482666,
      "high": 4.800000190734863,
      "low": 4.409999847412109,
      "close": 4.5,
      "volume": 220885888,
      "amount": 1011857024,
      "ma5": 4.742000484466553,
      "ma10": 5.0850001811981205,
      "ma20": 5.3665000915527346
    },
    {
      "time": "2018-4-9 0:0:0",
      "open": 4.619999885559082,
      "high": 4.699999809265137,
      "low": 4.510001182556152,
      "close": 4.570000171661377,
      "volume": 162275216,
      "amount": 747045696,
      "ma5": 4.700000286102295,
      "ma10": 4.955000209808349,
      "ma20": 5.328500103950501
    },
    {
      "time": "2018-4-10 0:0:0",
      "open": 4.570000171661377,
      "high": 4.610001087188721,
      "low": 4.360001087188721,
      "close": 4.5,
      "volume": 162731232,
      "amount": 725922304,
      "ma5": 4.648000049591064,
      "ma10": 4.8520002365112305,
      "ma20": 5.284500098228454
    },
    {
      "time": "2018-4-11 0:0:0",
      "open": 4.480000019073486,
      "high": 4.619999885559082,
      "low": 4.429999828338623,
      "close": 4.519999980926514,
      "volume": 134949888,
      "amount": 610305728,
      "ma5": 4.56200008392334,
      "ma10": 4.750000238418579,
      "ma20": 5.243500089645385
    },
    {
      "time": "2018-4-12 0:0:0",
      "open": 4.550000190734863,
      "high": 4.619999885559082,
      "low": 4.449999809265137,
      "close": 4.460000038146973,
      "volume": 110386136,
      "amount": 499574112,
      "ma5": 4.5100000381469725,
      "ma10": 4.688000249862671,
      "ma20": 5.199000096321106
    },
    {
      "time": "2018-4-13 0:0:0",
      "open": 4.480000019073486,
      "high": 4.510001182556152,
      "low": 4.320000171661377,
      "close": 4.360001087188721,
      "volume": 114581416,
      "amount": 504448320,
      "ma5": 4.482000255584717,
      "ma10": 4.612000370025635,
      "ma20": 5.144000148773193
    },
    {
      "time": "2018-4-16 0:0:0",
      "open": 4.289999961853027,
      "high": 4.300000190734863,
      "low": 4.079999923706055,
      "close": 4.139999866485596,
      "volume": 147507936,
      "amount": 615548288,
      "ma5": 4.39600019454956,
      "ma10": 4.548000240325928,
      "ma20": 5.0710001468658445
    },
    {
      "time": "2018-4-17 0:0:0",
      "open": 4.280001163482666,
      "high": 4.550000190734863,
      "low": 4.210000038146973,
      "close": 4.550000190734863,
      "volume": 308519232,
      "amount": 1383727232,
      "ma5": 4.406000232696533,
      "ma10": 4.527000141143799,
      "ma20": 4.990500164031983
    },
    {
      "time": "2018-4-18 0:0:0",
      "open": 4.679999828338623,
      "high": 4.869999885559082,
      "low": 4.590000152587891,
      "close": 4.650000095367432,
      "volume": 365407392,
      "amount": 1727733376,
      "ma5": 4.432000255584716,
      "ma10": 4.4970001697540285,
      "ma20": 4.89350016117096
    },
    {
      "time": "2018-4-19 0:0:0",
      "open": 4.960000038146973,
      "high": 5.119999885559082,
      "low": 4.739999771118164,
      "close": 5.119999885559082,
      "volume": 299433312,
      "amount": 1491433344,
      "ma5": 4.564000225067138,
      "ma10": 4.537000131607056,
      "ma20": 4.853000164031982
    },
    {
      "time": "2018-4-20 0:0:0",
      "open": 5.210000038146973,
      "high": 5.630000114440918,
      "low": 5.119999885559082,
      "close": 5.630000114440918,
      "volume": 474851552,
      "amount": 2617228032,
      "ma5": 4.818000030517578,
      "ma10": 4.650000143051147,
      "ma20": 4.867500162124633
    },
    {
      "time": "2018-4-23 0:0:0",
      "open": 5.070000171661377,
      "high": 5.46999979019165,
      "low": 5.070000171661377,
      "close": 5.070000171661377,
      "volume": 321049152,
      "amount": 1657763456,
      "ma5": 5.004000091552735,
      "ma10": 4.700000143051147,
      "ma20": 4.827500176429749
    },
    {
      "time": "2018-4-24 0:0:0",
      "open": 4.889999866485596,
      "high": 5.179999828338623,
      "low": 4.610001087188721,
      "close": 4.940000057220459,
      "volume": 307413376,
      "amount": 1489975552,
      "ma5": 5.082000064849853,
      "ma10": 4.7440001487731935,
      "ma20": 4.798000192642212
    },
    {
      "time": "2018-4-27 0:0:0",
      "open": 4.369999885559082,
      "high": 4.760001182556152,
      "low": 4.369999885559082,
      "close": 4.590000152587891,
      "volume": 212134656,
      "amount": 981624192,
      "ma5": 5.070000076293946,
      "ma10": 4.751000165939331,
      "ma20": 4.750500202178955
    },
    {
      "time": "2018-5-2 0:0:0",
      "open": 4.619999885559082,
      "high": 4.800000190734863,
      "low": 4.269999980926514,
      "close": 4.679999828338623,
      "volume": 192975056,
      "amount": 884513152,
      "ma5": 4.982000064849854,
      "ma10": 4.7730001449584964,
      "ma20": 4.730500197410583
    },
    {
      "time": "2018-5-3 0:0:0",
      "open": 4.630001068115234,
      "high": 4.75,
      "low": 4.519999980926514,
      "close": 4.679999828338623,
      "volume": 75146800,
      "amount": 349941312,
      "ma5": 4.792000007629395,
      "ma10": 4.8050000190734865,
      "ma20": 4.70850019454956
    }
  ]
  CandleStickDrawer.MAIndicators = [
    {
      key: 'ma5',
      color: '#FF8E29'
    },
    {
      key: 'ma10',
      color: '#ADE3F3'
    },
    {
      key: 'ma20',
      color: '#EC6ED9'
    }
  ]
  const klineChart = new Chart({
    selector: '#candle-stick',
    resolution: devicePixelRatio >= 2 ? 2 : 1,
    count: 80,
    data: MOCK_KLINE,
    mainDrawer: CandleStickDrawer,
    auxiliaryDrawers: [
      class CustomVolumeDrawer extends VolumeDrawer {
        calcDeltaPrice(currentValue: VolumeData, currentIndex: number, data: VolumeData[]): number {
          if (currentIndex === 0) return 0;
          return super.calcDeltaPrice(currentValue, currentIndex, data);
        }
      }
    ]
  })
}
// createTimeShare()
createKLine()